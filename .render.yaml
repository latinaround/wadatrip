services:
  - type: web
    name: wadatrip-alerts
    env: node
    rootDir: .
    buildCommand: |
      YARN_ENABLE_SCRIPTS=0 node .yarn/releases/yarn-4.9.4.cjs install
      node .yarn/releases/yarn-4.9.4.cjs prisma generate --schema libs/db/prisma/schema.prisma
      YARN_ENABLE_SCRIPTS=0 node .yarn/releases/yarn-4.9.4.cjs workspaces focus @wadatrip/service-gateway --production
    startCommand: node .yarn/releases/yarn-4.9.4.cjs workspace @wadatrip/service-gateway start
    envVars:
      - key: NODE_VERSION
        value: 20.11.1
      - key: NODE_ENV
        value: production
      - key: STRIPE_SECRET_KEY
        sync: false
      - key: STRIPE_PUBLISHABLE_KEY
        sync: false
